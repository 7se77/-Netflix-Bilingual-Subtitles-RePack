!function(e){var o={};function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)t.d(n,r,function(o){return e[o]}.bind(null,r));return n},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=19)}({19:function(e,o,t){function n(e,o){const t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e),o.appendChild(t)}function r(e,o,t){const n=document.createElement("script");n.setAttribute("type","application/json"),n.setAttribute("src",e),n.id=t,o.appendChild(n)}function a(e){const o=document.getElementsByTagName("head")[0],t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),o.appendChild(t)}async function s(e,o,t){const n=document.createElement("img"),r=await async function(e){const o=await fetch(e).then(e=>e.blob()).catch(e=>console.log(e));return await new Promise(e=>{const t=new FileReader;t.onload=()=>e(t.result),t.readAsDataURL(o)})}(e);n.setAttribute("id",t),n.setAttribute("src",r),n.style.display="none",o.appendChild(n)}function i(e,o,t){return window.postMessage({direction:"send-"+e,message:o,exId:t},"*")}console.group("NBS - cs");const c=function(e){let o="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length;for(let r=0;r<e;r+=1)o+=t.charAt(Math.floor(Math.random()*n));return o}("20");chrome.runtime.sendMessage({browser:function(){const e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,o="undefined"!=typeof InstallTrigger,t=!!document.documentMode,n=!t&&!!window.StyleMedia,r=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{isOpera:e,isFirefox:o,isIE:t,isEdge:n,isChrome:r,isEdgeChromium:r&&-1!==navigator.userAgent.indexOf("Edg")}}()},e=>{console.log(e.response)}),chrome.storage.sync.get(["enable","learning","japaneseEnable","levelOneWords","levelTwoWords","levelThreeWords","levelFourWords"],({enable:e,learning:o,japaneseEnable:t,levelOneWords:i,levelTwoWords:_,levelThreeWords:l,levelFourWords:d})=>{if(!0===e){console.log("- 插件已啟動");const e=document.createElement("div");e.setAttribute("id","nbs-container"),e.setAttribute("exId",c),document.body.appendChild(e),n(chrome.runtime.getURL("subs.min.js"),e),n(chrome.runtime.getURL("third.min.js"),e),t&&(n(chrome.runtime.getURL("resource/kuroshiro.min.js"),e),n(chrome.runtime.getURL("resource/kuroshiro-analyzer-kuromoji.min.js"),e)),a(chrome.runtime.getURL("css/subs.css"));const p=new Map([["image/icon/dash-circle.svg","dash-circle-icon"],["image/icon/plus-circle.svg","plus-circle-icon"],["image/icon/arrow-counterclockwise.svg","arrow-counterclockwise-icon"],["image/icon/play-circle.svg","play-circle-icon"],["image/icon/scissors.svg","scissor-icon"],["image/icon/dash.svg","dash-icon"],["image/icon/plus.svg","plus-icon"],["image/icon/plus-square.svg","plus-square-icon"],["image/icon/x-square.svg","x-square-icon"],["image/icon/file-earmark-arrow-down.svg","download-icon"],["image/icon/file-earmark-arrow-up.svg","upload-icon"],["image/icon/star.svg","star-icon"],["image/icon/star-fill.svg","star-fill-icon"],["image/icon/robot.svg","robot-icon"],["image/icon/soundwave.svg","soundwave-icon"],["image/icon/bookmarks.svg","bookmarks-icon"],["image/icon/pencil-square.svg","pencil-square-icon"],["image/icon/link.svg","link-icon"],["image/icon/floppy.svg","floppy-icon"],["image/icon/arrow-up-square.svg","arrow-up-square-icon"],["image/icon/dash-square.svg","dash-square-icon"],["image/icon/globe.svg","globe-icon"],["image/icon/eye.svg","eye-icon"],["image/icon/eye-fill.svg","eye-fill-icon"],["image/icon/pin-angle.svg","pin-angle-icon"],["image/icon/pin-angle-fill.svg","pin-angle-fill-icon"],["image/icon/arrows-move.svg","arrows-move-icon"],["image/icon/arrows-angle-expand.svg","arrows-angle-expand-icon"],["image/icon/arrows-angle-contract.svg","arrows-angle-contract-icon"]]);for(const[o,t]of p)s(chrome.runtime.getURL(o),e,t);for(let o=0;o<22;o+=1)s(chrome.runtime.getURL(`image/viseme/viseme-id-${o}.jpg`),e,"viseme-id-"+o);!0===o&&(a(chrome.runtime.getURL("css/learning.css")),function(e,o,t){const n=document.createElement("audio");n.setAttribute("type","audio/mpeg"),n.setAttribute("id",t),n.setAttribute("src",e),o.appendChild(n)}(chrome.runtime.getURL("resource/audio/click.mp3"),e,"typingSound"),i&&r(chrome.runtime.getURL("resource/json/5k-1.json"),e,"5k-1"),_&&r(chrome.runtime.getURL("resource/json/5k-2.json"),e,"5k-2"),l&&r(chrome.runtime.getURL("resource/json/5k-3.json"),e,"5k-3"),d&&r(chrome.runtime.getURL("resource/json/5k-4.json"),e,"5k-4"))}else!1===e?console.log("- 插件已關閉"):console.log("- 發生 undefined 錯誤 (enable)")}),window.addEventListener("message",e=>{if(!(e.source===window&&e.data&&e.data.direction&&e.data.exId))return;if(e.data.exId!==c)return;const{direction:o}=e.data;switch(o){case"req-storageValues":chrome.storage.sync.get(["subY","mainFamily","mainGoogleFamilies","mainGoogleCssProperties","mainSize","mainWeight","mainColor","mainBackgroundColor","mainBackgroundColorOpacity","secondFamily","secondGoogleFamilies","secondGoogleCssProperties","secondSize","secondWeight","secondColor","secondBackgroundColor","secondBackgroundColorOpacity","space","imageBasedSubs","learning","autoPlayNextSub","skipPatternWhoSpeak","playTypingSound","secondsToDelay","ignoreCase","selectable","mainLanguages","secondLanguages","enableShortcuts","userId","userToken","statusJson","copyPreviousSubShortcut","playbackSpeedShortcut","japaneseEnable","japaneseRomaji","japaneseMode","japaneseConvertTo","translationEnable","translationLanguage","showAllLangSelections","useBackupTranslationService","translationEngine","enableAiTranslation","selectedTranslationLanguages","enableTextSegmentation","defaultPromptId","accessibilityVoice","accessibilityRate","accessibilityVolume"],e=>{for(const[o,t]of Object.entries(e))void 0!==t&&i(o,t,c)});break;case"req-i18n":!function(e){const o=["web_mainMenuTitle","web_secondaryMenuTitle","web_downloadingMsg","web_errorMsg","web_completedMsg","web_noSelectedSubtitle","web_showPrimarySub","web_hidePrimarySub","web_showSecondarySub","web_hideSecondarySub","web_trialEnd","web_popup_title","web_popup_description","web_popup_shortcuts","web_popup_repeat_key","web_popup_prev_key","web_popup_next_key","web_popup_togglePrimary_key","web_popup_toggleSecondary_key","web_popup_skip_word_key","web_popup_skip_word_desc","web_popup_repeat_desc","web_popup_prev_desc","web_popup_next_desc","web_popup_togglePrimary_desc","web_popup_toggleSecondary_desc","web_popup_start","web_popup_wordCount","web_editor_subtract_begin","web_editor_add_begin","web_editor_subtract_end","web_editor_add_end","web_editor_play","web_editor_reset","web_editor_duplicate","web_editor_remove","web_editor_edit_text","web_editor_add_time_variable","web_editor_subtract_time_variable","web_editor_download","web_editor_upload","web_editor_mainSub","web_editor_secondarySub","web_robot_ref","web_robot_sending","web_robot_new_prompt","web_robot_send_prompt","web_robot_community","web_robot_save_prompt","web_robot_update_prompt","web_robot_delete_prompt","web_robot_set_default_prompt","web_robot_set_prompt_preview","web_robot_save_prompt_title","web_robot_save_prompt_description","web_robot_save_prompt_username","web_robot_save_prompt_public","web_robot_sample_1_title","web_robot_sample_2_title","web_robot_sample_3_title","web_robot_hint","web_popup_copy_previous_sub_ok","web_popup_copy_previous_sub_none","web_popup_enable_playback_speed_main","web_popup_enable_playback_speed_secondary","web_popup_disable_playback_speed_main","web_popup_disable_playback_speed_secondary","web_translation_loading","web_translation_failed","web_translation_mismatch","web_translation_quota_limit_reached","web_translation_language_not_set","web_translation_detail","web_translation_examples","web_translation_xslow","web_translation_slow","web_translation_medium","web_translation_prompt_hint","web_bookmark_uncategorized","web_bookmark_create_deck","web_bookmark_create_deck_placeholder","web_bookmark_create_deck_submit","web_bookmark_create_deck_cancel","web_bookmark_create_deck_duplicate","web_bookmark_remove_deck","web_bookmark_update_card","web_bookmark_sort_createdAt_desc","web_bookmark_sort_createdAt_asc","web_bookmark_sort_updatedAt_desc","web_bookmark_sort_updatedAt_asc","web_bookmark_sort_nextReviewTime_desc","web_bookmark_sort_nextReviewTime_asc","web_bookmark_open_flashcard","web_bookmark_export_deck","web_bookmark_export_deck_warning","web_bookmark_embed_ai_prompts","popup_bookmark_relogin","popup_bookmark_member_only"],t={};for(let e=0,n=o.length;e<n;e+=1){const n=chrome.i18n.getMessage(o[e]);n.length>0&&(t[o[e]]=n)}i("i18n",t,e)}(c);break;case"req-dict-path":i("dict-path","https://netflixsubs.app/scache/netflixsubs-app-downloads/kuromoji-dict",c);break;case"req-open-learning-link":!function(){const e=chrome.i18n.getUILanguage();let o;o="zh-TW"===e?"https://netflixsubs.app/zh-tw/docs/netflix/features/learning":"zh-CN"===e?"https://netflixsubs.app/zh/docs/netflix/features/learning":"https://netflixsubs.app/docs/netflix/features/learning",window.open(o,"newwindow").focus()}();break;case"req-open-relogin-link":!function(){const e=chrome.i18n.getUILanguage();let o;o="zh-TW"===e?"https://netflixsubs.app/zh-tw/docs/netflix/features/learning#%E7%82%BA%E4%BB%80%E9%BA%BC%E6%94%B6%E8%97%8F%E5%8A%9F%E8%83%BD%E9%9C%80%E8%A6%81%E7%94%A8%E6%88%B6%E9%87%8D%E6%96%B0%E7%99%BB%E5%85%A5":"zh-CN"===e?"https://netflixsubs.app/zh/docs/netflix/features/learning#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%94%B6%E8%97%8F%E5%8A%9F%E8%83%BD%E9%9C%80%E8%A6%81%E7%94%A8%E6%88%B7%E9%87%8D%E6%96%B0%E7%99%BB%E5%BD%95":"https://netflixsubs.app/docs/netflix/features/learning#why-does-the-bookmark-feature-require-users-to-log-in-again",window.open(o,"newwindow").focus()}();break;case"save-mainLanguages":Array.isArray(e.data.message)&&chrome.storage.sync.set({mainLanguages:e.data.message},()=>console.log("- 儲存主字幕選項"));break;case"save-secondLanguages":Array.isArray(e.data.message)&&chrome.storage.sync.set({secondLanguages:e.data.message},()=>console.log("- 儲存副字幕選項"));break;case"save-defaultPromptId":void 0!==e.data.message&&chrome.storage.sync.set({defaultPromptId:String(e.data.message)},()=>console.log("- 儲存預設提示詞"))}}),chrome.storage.onChanged.addListener(e=>{for(const[o,{newValue:t}]of Object.entries(e))i(o,t,c)})}});